(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{458:function(t,n,s){"use strict";s.r(n);var e=s(2),a=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("封装完了接口方法、ts 类型和 axios，我们接下来就要编写"),n("strong",[t._v("前端路由")]),t._v("了。前端路由主要是编写一些静态路由（登录、layout），其它路由由登录后获取对应角色的权限然后拼接到路由上，例如下图的用户管理、角色管理等。")]),t._v(" "),n("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c81026c261804c2f82d0881308623596~tplv-k3u1fbpfcp-watermark.image?",alt:"img.png",referrerpolicy:"no-referrer"}}),t._v(" "),n("h2",{attrs:{id:"router-路由模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#router-路由模块"}},[t._v("#")]),t._v(" router 路由模块")]),t._v(" "),n("p",[t._v("我们观察上图可以将此系统分为 2 个结构，一是"),n("strong",[t._v("layout 部分")]),t._v("（包含 header 和 sidebar），二是"),n("strong",[t._v("内容部分")]),t._v("即点击菜单后跳转到的对应路由部分。其中"),n("strong",[t._v("layout 部分")]),t._v("是属于非路由组件，我们放在 components 文件夹中。"),n("strong",[t._v("内容部分")]),t._v("称为路由组件，我们新建一个 views 文件夹来存放。我们这里先不管后端传来的路由，先按照上图去构建对应的路由能够显示对应文件的结构再去考虑后端路由。")]),t._v(" "),n("p",[t._v("先构建如下目录结构")]),t._v(" "),n("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54beadacd653409aa0f08da1061b2a58~tplv-k3u1fbpfcp-watermark.image?",alt:"img.png",referrerpolicy:"no-referrer"}}),t._v(" "),n("p",[t._v("然后构建路由")]),t._v(" "),n("p",[n("strong",[t._v("router/index.ts")])]),t._v(" "),n("div",{staticClass:"language-ts extra-class"},[n("pre",{pre:!0,attrs:{class:"language-ts"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRouter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createWebHashHistory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" RouteRecordRaw "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Layout "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/components/layout/index.vue'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Array")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("RouteRecordRaw"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    component"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Layout"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    redirect"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Home'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        meta"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'首页'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/views/home/index.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/system'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'System'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    meta"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'系统管理'")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    redirect"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/system/user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/system/user'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'User'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        meta"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户管理'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          icon"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/views/system/user.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/system/role'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Role'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        meta"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'角色管理'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          icon"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'peoples'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/views/system/role.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/system/menu'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Menu'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        meta"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          title"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'菜单管理'")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/views/system/menu.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Login'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    meta"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置此属性控制路由项是否显示在侧边栏中,为true隐藏")]),t._v("\n      hidden"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../views/login.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  history"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWebHashHistory")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  routes\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" router\n")])])]),n("h2",{attrs:{id:"layout-页面模块实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#layout-页面模块实现"}},[t._v("#")]),t._v(" Layout 页面模块实现")]),t._v(" "),n("p",[t._v("接下来通过第一张图所示的页面结构来构建"),n("strong",[t._v("layout 页面布局")]),t._v("部分。分为 header 及 sidebar 及内容区域（用路由视图控制进行路由视图的显示）")]),t._v(" "),n("p",[t._v("但首先，菜单的话会用到"),n("code",[t._v("svg")]),t._v("图标，这里简要描述一下做法")]),t._v(" "),n("h3",{attrs:{id:"svg-图标的封装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#svg-图标的封装"}},[t._v("#")]),t._v(" svg 图标的封装")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("安装 "),n("code",[t._v("vite-plugin-svg-icons")]),t._v(" 插件和 fast-glob 插件")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("npm i vite-plugin-svg-icons -D\nnpm i fast-glob -D\n")])])])]),t._v(" "),n("li",[n("p",[t._v("配置 "),n("code",[t._v("vite.config.ts")])])])]),t._v(" "),n("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9563f28ab913442198b028aa1a04f002~tplv-k3u1fbpfcp-watermark.image?",alt:"img.png",referrerpolicy:"no-referrer"}}),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("配置 "),n("code",[t._v("tsconfig.json")])])]),t._v(" "),n("p",[n("strong",[t._v("tsconfig.json")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('```\n{\n  "compilerOptions": {\n    "types": ["vite-plugin-svg-icons/client"]\n  }\n}\n```\n')])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("封装 SvgIcon 组件")])]),t._v(" "),n("p",[n("strong",[t._v("components/SvgIcon/index.vue")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('```vue\n<template>\n  <svg aria-hidden="true" class="svg-icon" :style="\'width:\' + size + \';height:\' + size">\n    <use :xlink:href="symbolId" :fill="color" />\n  </svg>\n</template>\n​\n<script setup lang="ts">\nimport { computed } from \'vue\';\n​\nconst props = defineProps({\n  prefix: {\n    type: String,\n    default: \'icon\'\n  },\n  iconClass: {\n    type: String,\n    required: false\n  },\n  color: {\n    type: String\n  },\n  size: {\n    type: String,\n    default: \'1em\'\n  }\n});\n​\nconst symbolId = computed(() => `#${props.prefix}-${props.iconClass}`);\n<\/script>\n​\n<style scoped>\n.svg-icon {\n  vertical-align: -0.15em;\n  overflow: hidden;\n  fill: currentColor;\n}\n</style>\n```\n')])])]),n("ol",{attrs:{start:"5"}},[n("li",[t._v("配置 main.ts 导入组件")])]),t._v(" "),n("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c642c8d008c24e9bac1b5e5c8745643e~tplv-k3u1fbpfcp-watermark.image?",alt:"img.png",referrerpolicy:"no-referrer"}}),t._v(" "),n("h3",{attrs:{id:"实现-layout-页面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现-layout-页面"}},[t._v("#")]),t._v(" 实现 Layout 页面")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("安装 sass")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("npm install sass@1.54.4 -D\n")])])])]),t._v(" "),n("li",[n("p",[t._v("实现标题链接页面（用于路由跳转）")])])]),t._v(" "),n("p",[n("strong",[t._v("components/layout/Link.vue")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('```vue\n<template>\n  <div @click="push">\n    \x3c!-- 插槽内置菜单项 --\x3e\n    <slot />\n  </div>\n</template>\n​\n<script lang="ts" setup>\nimport { useRouter } from \'vue-router\';\n// 接收到点击的菜单页\nconst props = defineProps({\n  to: {\n    type: String,\n    required: true\n  }\n})\n// 导入路由\nconst router = useRouter();\n// 路由跳转方法\nconst push = () => {\n  router.push(props.to).catch(err => {\n    console.log(err);\n  });\n};\n<\/script>\n```\n')])])]),n("ol",{attrs:{start:"3"}},[n("li",[n("p",[t._v("实现菜单项页面")]),t._v(" "),n("p",[t._v("主要就是判断有没有孩子，有一个孩子和无孩子直接展示单个的菜单项，有孩子展示下拉菜单")])])]),t._v(" "),n("p",[n("strong",[t._v("components/layout/SidebarItem.vue")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('```vue\n\n <template>\n\n  <div v-if="!item.meta || !item.meta.hidden">\n\n    <template v-if="\n      hasOneShowingChild(item.children, item) &&\n      (!onlyOneChild.children || onlyOneChild.noShowingChildren)\n    ">\n      <app-link v-if="onlyOneChild.meta" :to="resolvePath(onlyOneChild.path)">\n        <el-menu-item :index="resolvePath(onlyOneChild.path)">\n          <svg-icon v-if="onlyOneChild.meta && onlyOneChild.meta.icon" :icon-class="onlyOneChild.meta.icon"\n            style="margin-right: 10px;" />\n          <template #title>\n             onlyOneChild.meta.title\n          </template>\n        </el-menu-item>\n      </app-link>\n    </template>\n  \n    <el-sub-menu v-else :index="resolvePath(item.path)" popper-append-to-body>\n    \n      <template #title>\n        <svg-icon v-if="item.meta && item.meta.icon" :icon-class="item.meta.icon" style="margin-right: 10px;">\n        </svg-icon>\n        <span v-if="item.meta && item.meta.title">\n          item.meta.title\n        </span>\n      </template>\n​\n      <sidebar-item v-for="child in item.children" :key="child.path" :item="child"\n        :base-path="resolvePath(child.path)" />\n    </el-sub-menu>\n  </div>\n</template>\n​\n<script setup lang="ts">\nimport { ref } from \'vue\';\n// vite中默认无path模块，需下载导入\nimport path from \'path-browserify\';\nimport AppLink from \'./Link.vue\';\n​\nconst props = defineProps({\n  item: {\n    type: Object,\n    required: true\n  },\n  basePath: {\n    type: String,\n    required: true\n  }\n});\n​\nconst onlyOneChild = ref();\n​\nfunction hasOneShowingChild(children = [] as any, parent: any) {\n  if (!children) {\n    children = [];\n  }\n  const showingChildren = children.filter((item: any) => {\n    if (item.meta && item.meta.hidden) {\n      return false;\n    } else {\n      onlyOneChild.value = item;\n      return true;\n    }\n  });\n​\n  // 当只有一个孩子时\n  if (showingChildren.length === 1) {\n    return true;\n  }\n​\n  // 当没有孩子时\n  if (showingChildren.length === 0) {\n    onlyOneChild.value = { ...parent, path: \'\', noShowingChildren: true };\n    return true;\n  }\n​\n  return false;\n}\n// 将地址拼接为一个完整的绝对路径\nfunction resolvePath(routePath: string) {\n  return path.resolve(props.basePath, routePath);\n}\n<\/script>\n\n```\n')])])]),n("ol",{attrs:{start:"4"}},[n("li",[t._v("实现总的布局 总的布局就是 header 页头+sidebar 侧边栏+内容区域。注意！这里静态菜单 routes 仅为测试所用，路由菜单是后端返回的")])]),t._v(" "),n("p",[n("strong",[t._v("components/layout/index.vue")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v('```vue\n<template>\n  <div class="app-container">\n    \x3c!-- header菜单 --\x3e\n    <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" text-color="#ffffff"\n      :ellipsis="false">\n      <el-menu-item index="1" class="menu-title">\n        <el-icon>\n          <Tools />\n        </el-icon>\n        &nbsp后台管理系统\n      </el-menu-item>\n      <div class="flex-grow"></div>\n      <el-sub-menu index="2">\n        <template #title>\n          <div class="user_name">用户</div>\n        </template>\n        <el-menu-item index="2-1" style="color: #3c8dbc;">个人中心</el-menu-item>\n        <el-menu-item index="2-2" style="color: #3c8dbc;">重置密码</el-menu-item>\n        <el-menu-item index="2-3" style="color: #3c8dbc;">退出登录</el-menu-item>\n      </el-sub-menu>\n    </el-menu>\n    \x3c!-- 侧边栏与内容区域 --\x3e\n    <div class="main-content">\n      \x3c!-- 侧边栏 --\x3e\n      <el-menu active-text-color="#ffd04b" background-color="#545c64" class="side-menu" :default-active="$route.path"\n        text-color="#fff" router>\n        <SidebarItem v-for="route in routes" :item="route" :key="route.path" :base-path="route.path" />\n      </el-menu>\n      \x3c!-- 内容区域 --\x3e\n      <div class="main-container">\n        <router-view />\n      </div>\n    </div>\n  </div>\n</template>\n​\n<script setup lang="ts">\nimport { ref, onMounted } from \'vue\'\nimport SidebarItem from \'./SidebarItem.vue\';\nimport { useRouter } from \'vue-router\';\n​\nconst activeIndex = ref(\'1\')\n// 从后端获取树状结构路由\nconst router = useRouter()\nconst routes = router.getRoutes()\nonMounted(() => {\n  console.log(routes);\n})\n<\/script>\n​\n<style scoped lang="scss">\n...\n</style>\n​\n```\n')])])]),n("h3",{attrs:{id:"测试效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试效果"}},[t._v("#")]),t._v(" 测试效果")]),t._v(" "),n("p",[t._v("可以看到显示效果符合预期，但是由于上个代码块的 getRoutes 方法是每个菜单项都列出来（可在控制台打印看到），所以每个路由项都循环遍历显示了。到时候给的会是顶级菜单（例如系统管理）的集合，就没有问题。")]),t._v(" "),n("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e011f988ff0a413a9900b734cb8dbcd6~tplv-k3u1fbpfcp-watermark.image?",alt:"img.png",referrerpolicy:"no-referrer"}})])}),[],!1,null,null,null);n.default=a.exports}}]);