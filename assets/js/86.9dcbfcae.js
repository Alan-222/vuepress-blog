(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{492:function(a,t,e){"use strict";e.r(t);var s=e(2),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("本文将用 react 的官方的"),t("code",[a._v("create-react-app")]),a._v("搭建项目基本的脚手架，再通过 CSS 预编译器 sass 处理公共的样式，并用"),t("code",[a._v("craco")]),a._v("库来覆盖原有"),t("code",[a._v("create-react-app")]),a._v("的默认配置")]),a._v(" "),t("h2",{attrs:{id:"搭建脚手架"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建脚手架"}},[a._v("#")]),a._v(" 搭建脚手架")]),a._v(" "),t("p",[a._v("再次提示，本系统"),t("code",[a._v("需要node.js版本>=16")])]),a._v(" "),t("h3",{attrs:{id:"使用-create-react-app"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-create-react-app"}},[a._v("#")]),a._v(" 使用 create-react-app")]),a._v(" "),t("p",[a._v("打开命令行工具，跳到你需要存放项目的文件夹，输入以下命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npx create-react-app react-antd5-admin\n")])])]),t("p",[a._v("等待安装完毕后显示如下图")]),a._v(" "),t("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4deba87c56d945a192f44c4478f9ac9b~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1334&h=837&s=59024&e=png&b=0c0c0c",alt:"img.png",referrerpolicy:"no-referrer"}}),a._v(" "),t("p",[a._v("然后我们按照指示输入指令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd react-antd5-admin\nnpm start\n")])])]),t("p",[a._v("显示如下界面，脚手架搭建成功")]),a._v(" "),t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd53267936a341aeb70df86899ee16ba~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=2559&h=1206&s=71684&e=png&b=282c34",alt:"img.png",referrerpolicy:"no-referrer"}}),a._v(" "),t("p",[a._v("但因为脚手架有许多我们用不到的文件和代码，所以我们需要简化一下")]),a._v(" "),t("h3",{attrs:{id:"简化脚手架"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简化脚手架"}},[a._v("#")]),a._v(" 简化脚手架")]),a._v(" "),t("p",[a._v("我们关掉命令行，用"),t("code",[a._v("vscode")]),a._v("打开项目，初始文件结构是这样的。")]),a._v(" "),t("img",{attrs:{src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e79226853e0c4e53ae81e45aa8c67aad~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=447&h=735&s=47305&e=png&b=23272d",alt:"img.png",referrerpolicy:"no-referrer"}}),a._v(" "),t("p",[a._v("我们现在删去不需要的文件，项目文件结构变成这样。并将"),t("code",[a._v("App.js")]),a._v("后缀改为 jsx")]),a._v(" "),t("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7895e4dbbfc94b3f84c96a6c6e67b644~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=423&h=402&s=24265&e=png&b=23272d",alt:"img.png",referrerpolicy:"no-referrer"}}),a._v(" "),t("p",[a._v("然后简化代码")]),a._v(" "),t("p",[t("strong",[a._v("public/index.html")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <meta\n      name="description"\n      content="React+Antd5后台管理系统"\n    />\n    <title>React App</title>\n  </head>\n  <body>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id="root"></div>\n  </body>\n</html>\n')])])]),t("p",[t("strong",[a._v("src/App.jsx")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("import React from 'react'\n​\nconst App = () => {\n  return (\n    <div>App</div>\n  )\n}\n​\nexport default App\n")])])]),t("p",[t("strong",[a._v("src/index.js")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n​\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <App />\n);\n")])])]),t("p",[a._v("然后"),t("code",[a._v("npm start")]),a._v("启动项目，页面上显示"),t("code",[a._v("App")]),a._v("字样脚手架就搭建与简化成功")]),a._v(" "),t("h2",{attrs:{id:"集成-css-预编译器-sass"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成-css-预编译器-sass"}},[a._v("#")]),a._v(" 集成 CSS 预编译器 sass")]),a._v(" "),t("h3",{attrs:{id:"安装和编写公有样式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装和编写公有样式"}},[a._v("#")]),a._v(" 安装和编写公有样式")]),a._v(" "),t("p",[a._v("在终端安装 sass")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm install sass -D\n")])])]),t("p",[a._v("在 src 目录下创建"),t("code",[a._v("index.scss")]),a._v("文件编写公共样式并在 index.js 中引入")]),a._v(" "),t("img",{attrs:{src:"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e1871e79108498a8b42a8c1380fc417~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1925&h=396&s=68474&e=png&b=282c34",alt:"img.png",referrerpolicy:"no-referrer"}}),a._v(" "),t("h3",{attrs:{id:"页面编写私有样式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#页面编写私有样式"}},[a._v("#")]),a._v(" 页面编写私有样式")]),a._v(" "),t("p",[a._v("若页面文件需要编写私有样式在同名文件夹下创建"),t("code",[a._v("xx.module.scss")]),a._v("文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v(".container{\n  width:200px;\n  height:200px\n}\n")])])]),t("p",[a._v("页面使用时")]),a._v(" "),t("p",[a._v("1.导入样式文件")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("import style from './xx.module.scss'\n")])])]),t("p",[a._v("2.用"),t("code",[a._v("style")]),a._v("对象去访问样式名")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("<div className={styles.container}>xxxxx</div>\n")])])]),t("blockquote",[t("p",[a._v("注意，所有引入的"),t("code",[a._v("css、scss")]),a._v("或其它后缀文件最终打包后同类名可能会存在样式冲突问题，所以需要用"),t("code",[a._v("CSS Module")]),a._v("方案去解决")])]),a._v(" "),t("h2",{attrs:{id:"craco-库覆盖-create-react-app-默认配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#craco-库覆盖-create-react-app-默认配置"}},[a._v("#")]),a._v(" craco 库覆盖 create-react-app 默认配置")]),a._v(" "),t("h3",{attrs:{id:"安装依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[a._v("#")]),a._v(" 安装依赖")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("npm install @craco/craco\n")])])]),t("h3",{attrs:{id:"根目录下创建craco-config-js配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#根目录下创建craco-config-js配置文件"}},[a._v("#")]),a._v(" 根目录下创建"),t("code",[a._v("craco.config.js")]),a._v("配置文件")]),a._v(" "),t("p",[a._v("我们这里以修改 webpack 别名为例")]),a._v(" "),t("p",[t("strong",[a._v("craco.config.js")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("const path = require('path')\nconst resolve = (dir) => path.resolve(__dirname, dir)\nmodule.exports = {\n  webpack: {\n    alias: {\n      '@': resolve('src')\n    }\n  }\n}\n")])])]),t("h3",{attrs:{id:"修改-package-json-中脚本命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-package-json-中脚本命令"}},[a._v("#")]),a._v(" 修改 package.json 中脚本命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('"scripts": {\n  "start": "craco start",\n  "build": "craco build",\n  "test": "craco test",\n  "eject": "react-scripts eject"\n},\n')])])]),t("p",[a._v("重新"),t("code",[a._v("npm start")]),a._v("启动项目，正常显示即没问题")]),a._v(" "),t("h2",{attrs:{id:"代码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码"}},[a._v("#")]),a._v(" 代码")]),a._v(" "),t("p",[a._v("上述实现的代码都放在"),t("a",{attrs:{href:"https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FAlan-222%2Freact-antd5-admin",title:"https://github.com/Alan-222/react-antd5-admin",target:"_blank",rel:"noopener noreferrer"}},[a._v("react-antd5-admin"),t("OutboundLink")],1),a._v("，大家可自行查阅")])])}),[],!1,null,null,null);t.default=r.exports}}]);