<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue3åå°ç®¡ç†ç³»ç»Ÿ-è§’è‰²ç®¡ç†é¡µé¢ğŸ”¥ | é¾™äºŒçš„åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="ä¸è¦å› ä¸ºåˆ«äººéƒ½åœ¨äº¤å·è‡ªå·±å°±ä¹±å†™ç­”æ¡ˆ">
    
    <link rel="preload" href="/vuepress-blog/assets/css/0.styles.a146971e.css" as="style"><link rel="preload" href="/vuepress-blog/assets/js/app.4d1def3f.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/3.7d50d3e1.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/1.6ae6daff.js" as="script"><link rel="preload" href="/vuepress-blog/assets/js/73.4514ed93.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/js/10.a0094eb9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/11.8cc30e4d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/12.a3b3d038.js"><link rel="prefetch" href="/vuepress-blog/assets/js/13.a651855d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/14.7ed1ec91.js"><link rel="prefetch" href="/vuepress-blog/assets/js/15.023cd03c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/16.9ef7ac5e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/17.422ad17c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/18.a6e180bf.js"><link rel="prefetch" href="/vuepress-blog/assets/js/19.6ce1b2b0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/20.9aadbc90.js"><link rel="prefetch" href="/vuepress-blog/assets/js/21.17c3096b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/22.313dd9d1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/23.4b2555ca.js"><link rel="prefetch" href="/vuepress-blog/assets/js/24.942269f4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/25.d5f20286.js"><link rel="prefetch" href="/vuepress-blog/assets/js/26.9a829b24.js"><link rel="prefetch" href="/vuepress-blog/assets/js/27.d7f30161.js"><link rel="prefetch" href="/vuepress-blog/assets/js/28.24ce6804.js"><link rel="prefetch" href="/vuepress-blog/assets/js/29.e5f055c1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/30.1ba01103.js"><link rel="prefetch" href="/vuepress-blog/assets/js/31.3d990e36.js"><link rel="prefetch" href="/vuepress-blog/assets/js/32.bb714c7d.js"><link rel="prefetch" href="/vuepress-blog/assets/js/33.91a0a990.js"><link rel="prefetch" href="/vuepress-blog/assets/js/34.6579c3f9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/35.27946a52.js"><link rel="prefetch" href="/vuepress-blog/assets/js/36.bf946ff3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/37.9efda974.js"><link rel="prefetch" href="/vuepress-blog/assets/js/38.2e89b085.js"><link rel="prefetch" href="/vuepress-blog/assets/js/39.a2c4046e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/4.76e26aa1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/40.e78e5bb4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/41.44229177.js"><link rel="prefetch" href="/vuepress-blog/assets/js/42.87ad822a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/43.5a0a040e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/44.52849bbd.js"><link rel="prefetch" href="/vuepress-blog/assets/js/45.39a7578a.js"><link rel="prefetch" href="/vuepress-blog/assets/js/46.524bb8f0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/47.7ed73f35.js"><link rel="prefetch" href="/vuepress-blog/assets/js/48.8b86acf1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/49.5336fb9f.js"><link rel="prefetch" href="/vuepress-blog/assets/js/5.7576fc30.js"><link rel="prefetch" href="/vuepress-blog/assets/js/50.4e1f73ad.js"><link rel="prefetch" href="/vuepress-blog/assets/js/51.f2ffcee1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/52.f144a0bb.js"><link rel="prefetch" href="/vuepress-blog/assets/js/53.856ca109.js"><link rel="prefetch" href="/vuepress-blog/assets/js/54.8783a9b1.js"><link rel="prefetch" href="/vuepress-blog/assets/js/55.230b5306.js"><link rel="prefetch" href="/vuepress-blog/assets/js/56.ac605fa3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/57.f1d2bcef.js"><link rel="prefetch" href="/vuepress-blog/assets/js/58.93d1b1c3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/59.273ec851.js"><link rel="prefetch" href="/vuepress-blog/assets/js/6.32f1aaf4.js"><link rel="prefetch" href="/vuepress-blog/assets/js/60.d4707dc9.js"><link rel="prefetch" href="/vuepress-blog/assets/js/61.bcea3999.js"><link rel="prefetch" href="/vuepress-blog/assets/js/62.64837723.js"><link rel="prefetch" href="/vuepress-blog/assets/js/63.2db0caf0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/64.0ca7fd83.js"><link rel="prefetch" href="/vuepress-blog/assets/js/65.028a9dfa.js"><link rel="prefetch" href="/vuepress-blog/assets/js/66.eaa80467.js"><link rel="prefetch" href="/vuepress-blog/assets/js/67.0ff1370e.js"><link rel="prefetch" href="/vuepress-blog/assets/js/68.bc893b77.js"><link rel="prefetch" href="/vuepress-blog/assets/js/69.a22929ab.js"><link rel="prefetch" href="/vuepress-blog/assets/js/7.385ed0df.js"><link rel="prefetch" href="/vuepress-blog/assets/js/70.371b7054.js"><link rel="prefetch" href="/vuepress-blog/assets/js/71.a01ce528.js"><link rel="prefetch" href="/vuepress-blog/assets/js/72.1b0cd0f5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/74.188aaa3b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/75.594b462c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/76.b8a12591.js"><link rel="prefetch" href="/vuepress-blog/assets/js/77.ee8dae13.js"><link rel="prefetch" href="/vuepress-blog/assets/js/78.921e11a2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/79.15260a1b.js"><link rel="prefetch" href="/vuepress-blog/assets/js/8.f0575d67.js"><link rel="prefetch" href="/vuepress-blog/assets/js/80.b8683be3.js"><link rel="prefetch" href="/vuepress-blog/assets/js/81.97f0bad0.js"><link rel="prefetch" href="/vuepress-blog/assets/js/82.fca1fb9c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/83.465cd15c.js"><link rel="prefetch" href="/vuepress-blog/assets/js/84.82978ff2.js"><link rel="prefetch" href="/vuepress-blog/assets/js/85.c19f75b5.js"><link rel="prefetch" href="/vuepress-blog/assets/js/86.9dcbfcae.js"><link rel="prefetch" href="/vuepress-blog/assets/js/87.a3f8e943.js"><link rel="prefetch" href="/vuepress-blog/assets/js/9.b0835361.js">
    <link rel="stylesheet" href="/vuepress-blog/assets/css/0.styles.a146971e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>é¾™äºŒçš„åšå®¢</h3> <p class="description" data-v-59e6cb88>ä¸è¦å› ä¸ºåˆ«äººéƒ½åœ¨äº¤å·è‡ªå·±å°±ä¹±å†™ç­”æ¡ˆ</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>é¾™äºŒ</span>
        Â Â 
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress-blog/" class="home-link router-link-active"><img src="/vuepress-blog/é¾™äºŒ.jpg" alt="é¾™äºŒçš„åšå®¢" class="logo"> <span class="site-name">é¾™äºŒçš„åšå®¢</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/CSSå­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  CSSå­¦ä¹ ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/ã€ŠES6å…¥é—¨æ•™ç¨‹ã€‹å­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  ã€ŠES6å…¥é—¨æ•™ç¨‹ã€‹å­¦ä¹ ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/Vueå­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  Vueå­¦ä¹ ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/vue3+ts+node.jsåå°ç®¡ç†ç³»ç»Ÿ/" class="nav-link"><i class="undefined"></i>
  vue3+ts+node.jsåå°ç®¡ç†ç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/ä»é›¶å®ç°ä¸€ä¸ªReact+Antd5.0åå°ç®¡ç†ç³»ç»Ÿ/" class="nav-link"><i class="undefined"></i>
  ä»é›¶å®ç°ä¸€ä¸ªReact+Antd5.0åå°ç®¡ç†ç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/javaScriptå­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  javaScriptå­¦ä¹ ç¬”è®°
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      æˆ‘çš„
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/4385276223300142" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Alan-222" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><!----> <h3 class="name" data-v-1fad0c41>
    é¾™äºŒ
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>77</h3> <h6 data-v-1fad0c41>æ–‡ç« </h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>11</h3> <h6 data-v-1fad0c41>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress-blog/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      åˆ†ç±»
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/CSSå­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  CSSå­¦ä¹ ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/ã€ŠES6å…¥é—¨æ•™ç¨‹ã€‹å­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  ã€ŠES6å…¥é—¨æ•™ç¨‹ã€‹å­¦ä¹ ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/Vueå­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  Vueå­¦ä¹ ç¬”è®°
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/vue3+ts+node.jsåå°ç®¡ç†ç³»ç»Ÿ/" class="nav-link"><i class="undefined"></i>
  vue3+ts+node.jsåå°ç®¡ç†ç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/ä»é›¶å®ç°ä¸€ä¸ªReact+Antd5.0åå°ç®¡ç†ç³»ç»Ÿ/" class="nav-link"><i class="undefined"></i>
  ä»é›¶å®ç°ä¸€ä¸ªReact+Antd5.0åå°ç®¡ç†ç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/vuepress-blog/categories/javaScriptå­¦ä¹ ç¬”è®°/" class="nav-link"><i class="undefined"></i>
  javaScriptå­¦ä¹ ç¬”è®°
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      æˆ‘çš„
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/4385276223300142" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Alan-222" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/vuepress-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>vue3åå°ç®¡ç†ç³»ç»Ÿ-è§’è‰²ç®¡ç†é¡µé¢ğŸ”¥</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>é¾™äºŒ</span>
        Â Â 
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">vue3åå°ç®¡ç†ç³»ç»Ÿ-è§’è‰²ç®¡ç†é¡µé¢ğŸ”¥</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>é¾™äºŒ</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/1/22</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>vue3</span><span class="tag-item" data-v-8a445198>ts</span><span class="tag-item" data-v-8a445198>node.js</span><span class="tag-item" data-v-8a445198>vue3åå°ç®¡ç†ç³»ç»Ÿ</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p>å®Œæˆäº†ç”¨æˆ·ç®¡ç†é¡µé¢ï¼Œå‰©ä¸‹ä¸¤ä¸ªé¡µé¢è§’è‰²ç®¡ç†ä»¥åŠèœå•ç®¡ç†ä¹Ÿå¤§åŒå°å¼‚ã€‚ä½†è§’è‰²ç®¡ç†è¿˜æœ‰ä¸€ä¸ªåˆ†é…èµ„æºçš„åŠŸèƒ½éœ€è¦å®ç°ï¼Œä½œç”¨ä¸ºé€‰æ‹©è§’è‰²çš„æƒé™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>el-tree</code>æ ‘å½¢æ§ä»¶æ¥å®Œæˆã€‚å½“æ‰“å¼€åˆ†é…è§’è‰²å¼¹çª—æ—¶ç»™æ ‘å½¢æ§ä»¶ä¼ é€’ä¸€ä¸ªæ ‘å½¢ç»“æ„çš„æ•°ç»„å»æ¸²æŸ“å®Œæ•´çš„<strong>æƒé™ç»“æ„ï¼ˆèœå•+å¯¹åº”çš„æŒ‰é’®ï¼‰</strong> ï¼Œç„¶åè·å–è§’è‰²çš„<strong>æƒé™ id</strong>å‹¾é€‰å°±å¯ä»¥ã€‚ç„¶å<strong>æ›´æ–°è§’è‰²æƒé™</strong>åªéœ€è¦æ”¹å˜æƒé™æ—¶è®°å½•ä¸‹<strong>æƒé™ id</strong>å†è°ƒç”¨æ›´æ–°è§’è‰²èµ„æºçš„æ¥å£å³å¯ã€‚</p> <h2 id="è§’è‰²ç®¡ç†åˆ†é…èµ„æºçš„å®ç°"><a href="#è§’è‰²ç®¡ç†åˆ†é…èµ„æºçš„å®ç°" class="header-anchor">#</a> è§’è‰²ç®¡ç†åˆ†é…èµ„æºçš„å®ç°</h2> <h3 id="æ¥å£æ•°æ®æ¥å£"><a href="#æ¥å£æ•°æ®æ¥å£" class="header-anchor">#</a> æ¥å£æ•°æ®æ¥å£</h3> <p>é¦–å…ˆæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹è·å–èœå•é¡¹æ¥å£å¤§æ¦‚å¾—åˆ°æ€æ ·çš„èœå•ç»“æ„ï¼Œå¦‚å›¾</p> <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1fb72fbc241c4292a9e051f7830d920e~tplv-k3u1fbpfcp-watermark.image?" alt="img.png" referrerpolicy="no-referrer"> <p>æ•°ç»„ç»“æ„çš„è¯å¤§æ¦‚å°±æ˜¯</p> <div class="language- extra-class"><pre class="language-text"><code>{
  label:&quot;xxx&quot;, Â  // èœå•æ ‡é¢˜
  value:&quot;xxx&quot; Â   // æƒé™id
  children:[{ Â   // å­å­©å­æ•°ç»„
 Â   label:'xx',
 Â   value:'xx',
 Â   perms:[{ Â  Â   // æŒ‰é’®æ•°ç»„
 Â  Â   label:&quot;xx&quot;
 Â  Â   value:''
 Â   }]
  }] Â 
}
</code></pre></div><p>ç¬¦åˆ<code>el-tree</code>æ ‘å½¢æ§ä»¶çš„è¦æ±‚ï¼Œ<strong>value</strong>å±æ€§ä½œä¸ºæ¯ä¸ªæ ‘èŠ‚ç‚¹ç”¨æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„å±æ€§</p> <img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0aca0b0bf1cd4e18b0eeb8bcfdadca4f~tplv-k3u1fbpfcp-watermark.image?" alt="img.png" referrerpolicy="no-referrer"> <h3 id="html-ç»“æ„"><a href="#html-ç»“æ„" class="header-anchor">#</a> html ç»“æ„</h3> <p>æˆ‘ä»¬é¦–å…ˆç¡®å®š<code>html</code>ç»“æ„ï¼Œç”¨<code>el-scrollbar</code>åŒ…è£¹æ ‘å½¢æ§ä»¶ï¼Œè¶…å‡ºé•¿åº¦æ˜¾ç¤ºæ»šåŠ¨æ¡ã€‚ç„¶åæŠŠä»–ä»¬æ”¾åœ¨å¼¹çª—é‡Œï¼Œç‚¹å‡»<strong>åˆ†é…èµ„æº</strong>æŒ‰é’®æ˜¾ç¤ºå¼¹çª—ã€‚æ ‘å½¢æ§ä»¶ä¸­ç”¨åˆ°æ’æ§½ï¼ŒåŒ…æ‹¬èœå•çš„æ ‡é¢˜ï¼Œè‹¥æœ‰æŒ‰é’®çš„è¯åˆ™æ˜¾ç¤ºå¤é€‰æ¡†ï¼ˆéå†èœå•æ‰€æœ‰çš„æŒ‰é’®ï¼‰</p> <p><strong>views/system/role.vue</strong></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!--åˆ†é…èµ„æºå¼¹çª—--&gt;
&lt;el-dialog :title=&quot;'ã€' + checkedRole.role_name + 'ã€‘èµ„æºåˆ†é…'&quot; v-model=&quot;resourceDialogVisible&quot; width=&quot;800px&quot;&gt;
  &lt;el-scrollbar max-height=&quot;600px&quot; v-loading=&quot;loading&quot;&gt;
 Â   &lt;el-tree ref=&quot;resourceRef&quot; node-key=&quot;value&quot; show-checkbox :data=&quot;resourceOptions&quot; :default-expand-all=&quot;true&quot;
 Â  Â   @check-change=&quot;handleResourceCheckChange&quot;&gt;
 Â  Â   &lt;template #default=&quot;{ data }&quot;&gt;
 Â  Â  Â   &lt;span&gt;{{ data.label }}&lt;/span&gt;
â€‹
 Â  Â  Â   &lt;div v-if=&quot;data.perms&quot; class=&quot;resource-tree-node&quot;&gt;
 Â  Â  Â  Â   &lt;el-divider direction=&quot;vertical&quot; /&gt;
 Â  Â  Â  Â   &lt;div class=&quot;node-content&quot;&gt;
 Â  Â  Â  Â  Â   &lt;el-checkbox v-for=&quot;perm in data.perms&quot; :key=&quot;perm.value&quot; :label=&quot;perm.value&quot; border size=&quot;small&quot;
 Â  Â  Â  Â  Â  Â   v-model=&quot;btnPerms[perm.value]&quot;&gt;{{ perm.label }}&lt;/el-checkbox&gt;
 Â  Â  Â  Â   &lt;/div&gt;
 Â  Â  Â   &lt;/div&gt;
 Â  Â   &lt;/template&gt;
 Â   &lt;/el-tree&gt;
  &lt;/el-scrollbar&gt;
â€‹
  &lt;template #footer&gt;
 Â   &lt;div class=&quot;dialog-footer&quot;&gt;
 Â  Â   &lt;el-button type=&quot;primary&quot; @click=&quot;handleRoleResourceSubmit&quot;&gt;ç¡® å®š&lt;/el-button&gt;
 Â  Â   &lt;el-button @click=&quot;cancelResourceAssign&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;
 Â   &lt;/div&gt;
  &lt;/template&gt;
&lt;/el-dialog&gt;
</code></pre></div><p><strong>js ä»£ç </strong></p> <p>ä¸Šé¢çš„ html ç»“æ„çš„<code>el-tree</code>ä¸­æœ‰<code>@check-change</code>æ–¹æ³•ï¼Œèƒ½è·å¾—åˆ°å‹¾é€‰èœå•çš„æ•°æ®å’Œå½“å‰å‹¾é€‰çš„çŠ¶æ€ï¼Œå½“å‹¾é€‰æˆ–è€…å–æ¶ˆèœå•é€‰é¡¹æ—¶è§¦å‘ã€‚æˆ‘ä»¬åªè¦åœ¨å‹¾é€‰èœå•æ—¶å°†å¯¹åº”<code>æŒ‰é’®checkbox</code>çš„çŠ¶æ€æ”¹ä¸ºè·Ÿå½“å‰èœå•å‹¾é€‰çŠ¶æ€ä¸€æ ·å³å¯ã€‚æˆ‘ç”¨äº†<code>btnPerms</code>çš„æ•°ç»„æ¥å­˜å‚¨æŒ‰é’®ï¼Œç»“æ„å¦‚ä¸‹</p> <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/787e5f5f095344438f8a62ec808b7239~tplv-k3u1fbpfcp-watermark.image?" alt="img.png" referrerpolicy="no-referrer"> <p>æ¯”å¦‚å½“æˆ‘å–æ¶ˆå‹¾é€‰äº†å›¾ä¸­ 20ã€21 çš„çˆ¶èœå•ï¼Œå°±å°† 20ã€21 çš„<code>checkbox</code>ä¹Ÿå–æ¶ˆå‹¾é€‰ã€‚ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>// æ ‘å½¢æ§ä»¶èœå•å‹¾/åé€‰æ–¹æ³•
const handleResourceCheckChange = (
  data: Resource,
  isCheck: boolean,
  sonHasCheck: boolean
) =&gt; {
  console.log('data', data);
  console.log('isCheck', isCheck);
  // å½“å‹¾/åé€‰çš„èœå•å­˜åœ¨æŒ‰é’®æ—¶ï¼ŒæŒ‰é’®çš„çŠ¶æ€æ”¹æˆå¯¹åº”èœå•çŠ¶æ€
  if (data.perms) {
 Â   data.perms.forEach(item =&gt; {
 Â  Â   btnPerms.value[item.value] = isCheck;
 Â   });
  }
};
</code></pre></div><p>è¿˜æœ‰å°±æ˜¯å½“æ‰“å¼€è§’è‰²åˆ†é…èµ„æºå¼¹çª—æ—¶å€™çš„æ–¹æ³•ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚</p> <ul><li>è·å–å…¨éƒ¨çš„èœå•ç»“æ„</li> <li>è·å–è¯¥è§’è‰²æ‰€æœ‰çš„èœå• id æ•°ç»„å’ŒæŒ‰é’® id æ•°ç»„ï¼Œå¯¹åº”è¿›è¡Œå‹¾é€‰</li></ul> <p>æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>/**
 * èµ„æºåˆ†é…
 */
function openRoleResourceDialog(row: RoleItem) {
  resourceDialogVisible.value = true;
  loading.value = true;
â€‹
  const roleId: number = row.role_id;
  checkedRole.value = {
 Â   role_id: roleId,
 Â   role_name: row.role_name
  };
â€‹
  // è·å–æ‰€æœ‰çš„èµ„æº
  listMenuOptions().then(response =&gt; {
 Â   resourceOptions.value = response.data;
â€‹
 Â   // è·å–è§’è‰²æ‹¥æœ‰çš„èµ„æº
 Â   getRoleResources(roleId).then(({ data }) =&gt; {
 Â  Â   // å‹¾é€‰çš„èœå•å›æ˜¾
 Â  Â   const checkedMenuIds = data.menu_ids;
 Â  Â   resourceRef.value.setCheckedKeys(checkedMenuIds);
â€‹
 Â  Â   nextTick(() =&gt; {
 Â  Â  Â   // å‹¾é€‰çš„æƒé™å›æ˜¾
 Â  Â  Â   const rolePermIds = data.permIds;
â€‹
 Â  Â  Â   state.allPermIds = filterResourcePermIds(response.data, []);
 Â  Â  Â   if (state.allPermIds) {
 Â  Â  Â  Â   state.allPermIds.forEach(permId =&gt; {
 Â  Â  Â  Â  Â   if (rolePermIds.indexOf(permId) &gt; -1) {
 Â  Â  Â  Â  Â  Â   btnPerms.value[permId] = true;
 Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â   btnPerms.value[permId] = false;
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â   });
 Â  Â  Â   }
 Â  Â  Â   loading.value = false;
 Â  Â   });
 Â   });
  });
}
â€‹
const filterResourcePermIds = (resources: Resource[], permIds: string[]) =&gt; {
  resources.forEach(resource =&gt; {
 Â   if (resource.perms) {
 Â  Â   resource.perms.forEach(perm =&gt; {
 Â  Â  Â   permIds.push(perm.value);
 Â  Â   });
 Â   }
 Â   if (resource.children) {
 Â  Â   filterResourcePermIds(resource.children, permIds);
 Â   }
  });
  return permIds;
};
</code></pre></div><p>ç„¶åæ˜¯æäº¤èµ„æºçš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>el-tree</code>æ§ä»¶çš„<code>getCheckedNodes</code>çš„æ–¹æ³•è·å¾—å‹¾é€‰çš„èœå•æ•°ç»„ï¼Œå†é€šè¿‡ä¸Šé¢çš„<code>btnPerms</code>è·å¾—å‹¾é€‰çš„æŒ‰é’®æ•°ç»„ã€‚ç„¶åå‡­è¿™ä¸¤ä¸ªæ•°ç»„æ›´æ–°è§’è‰²èµ„æºã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>/**
 * åˆ†é…èµ„æºæäº¤
 */
function handleRoleResourceSubmit() {
  const checkedMenuIds: any[] = resourceRef.value
 Â   .getCheckedNodes(false, true)
 Â   .map((node: any) =&gt; node.value);
â€‹
  const checkedPermIds = [] as string[];
  if (state.allPermIds) {
 Â   state.allPermIds.forEach(permId =&gt; {
 Â  Â   if (btnPerms.value[permId]) {
 Â  Â  Â   checkedPermIds.push(permId);
 Â  Â   }
 Â   });
  }
â€‹
  const RoleResource = {
 Â   menu_ids: checkedMenuIds,
 Â   permIds: checkedPermIds
  };
â€‹
  updateRoleResource(checkedRole.value.role_id, RoleResource).then(res =&gt; {
 Â   ElMessage.success('åˆ†é…æƒé™æˆåŠŸ');
 Â   state.resourceDialogVisible = false;
 Â   handleQuery();
  });
}
</code></pre></div><p>è§’è‰²ç®¡ç†æ€»ä½“ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;template&gt;
  &lt;div class=&quot;content-title&quot;&gt;ç”¨æˆ·ç®¡ç†&lt;/div&gt;
  &lt;div class=&quot;content-container&quot;&gt;
 Â   &lt;!-- æœç´¢è¡¨å• --&gt;
 Â   &lt;el-form ref=&quot;queryFormRef&quot; :model=&quot;queryParams&quot; :inline=&quot;true&quot;&gt;
 Â  Â   &lt;el-form-item&gt;
 Â  Â  Â   &lt;el-button color=&quot;#3c8dbc&quot; :icon=&quot;CirclePlus&quot; @click=&quot;handleAdd&quot;&gt;æ–°å¢&lt;/el-button&gt;
 Â  Â  Â   &lt;el-button color=&quot;#3c8dbc&quot; :icon=&quot;Remove&quot; :disabled=&quot;multiple&quot; @click=&quot;handleDelete&quot;&gt;æ‰¹é‡åˆ é™¤&lt;/el-button&gt;
 Â  Â   &lt;/el-form-item&gt;
â€‹
 Â  Â   &lt;el-form-item prop=&quot;role_name&quot;&gt;
 Â  Â  Â   &lt;el-input v-model=&quot;queryParams.role_name&quot; placeholder=&quot;è§’è‰²åç§°&quot; clearable @keyup.enter=&quot;handleQuery&quot; /&gt;
 Â  Â   &lt;/el-form-item&gt;
â€‹
 Â  Â   &lt;el-form-item&gt;
 Â  Â  Â   &lt;el-button color=&quot;#3c8dbc&quot; :icon=&quot;Search&quot; @click=&quot;handleQuery&quot;&gt;æœç´¢&lt;/el-button&gt;
 Â  Â  Â   &lt;el-button color=&quot;#3c8dbc&quot; :icon=&quot;Refresh&quot; @click=&quot;resetQuery&quot;&gt;é‡ç½®&lt;/el-button&gt;
 Â  Â   &lt;/el-form-item&gt;
 Â   &lt;/el-form&gt;
â€‹
 Â   &lt;!-- æ•°æ®è¡¨æ ¼ --&gt;
 Â   &lt;el-table ref=&quot;dataTableRef&quot; v-loading=&quot;loading&quot; :data=&quot;roleList&quot; @selection-change=&quot;handleSelectionChange&quot;
 Â  Â   highlight-current-row border&gt;
 Â  Â   &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot; /&gt;
 Â  Â   &lt;el-table-column label=&quot;è§’è‰²åç§°&quot; prop=&quot;role_name&quot; align=&quot;center&quot; /&gt;
 Â  Â   &lt;el-table-column label=&quot;è§’è‰²æè¿°&quot; prop=&quot;remark&quot; align=&quot;center&quot; /&gt;
â€‹
 Â  Â   &lt;el-table-column label=&quot;çŠ¶æ€&quot; align=&quot;center&quot;&gt;
 Â  Â  Â   &lt;template #default=&quot;scope&quot;&gt;
 Â  Â  Â  Â   &lt;el-tag v-if=&quot;scope.row.status === 1&quot; type=&quot;success&quot;&gt;æ­£å¸¸&lt;/el-tag&gt;
 Â  Â  Â  Â   &lt;el-tag v-else type=&quot;info&quot;&gt;ç¦ç”¨&lt;/el-tag&gt;
 Â  Â  Â   &lt;/template&gt;
 Â  Â   &lt;/el-table-column&gt;
â€‹
 Â  Â   &lt;el-table-column prop=&quot;create_time&quot; label=&quot;åˆ›å»ºæ—¶é—´&quot; align=&quot;center&quot; /&gt;
 Â  Â   &lt;el-table-column prop=&quot;update_time&quot; label=&quot;ä¿®æ”¹æ—¶é—´&quot; align=&quot;center&quot; /&gt;
â€‹
 Â  Â   &lt;el-table-column label=&quot;æ“ä½œ&quot; align=&quot;center&quot;&gt;
 Â  Â  Â   &lt;template #default=&quot;scope&quot;&gt;
 Â  Â  Â  Â   &lt;el-button link type=&quot;primary&quot; size=&quot;small&quot; @click.stop=&quot;openRoleResourceDialog(scope.row)&quot;&gt;
 Â  Â  Â  Â  Â   åˆ†é…èµ„æº
 Â  Â  Â  Â   &lt;/el-button&gt;
 Â  Â  Â  Â   &lt;el-button link type=&quot;primary&quot; size=&quot;small&quot; circle plain @click.stop=&quot;handleUpdate(scope.row)&quot;&gt;
 Â  Â  Â  Â  Â   ç¼–è¾‘
 Â  Â  Â  Â   &lt;/el-button&gt;
 Â  Â  Â  Â   &lt;el-button link type=&quot;primary&quot; size=&quot;small&quot; circle plain @click.stop=&quot;handleDelete(scope.row)&quot;&gt;
 Â  Â  Â  Â  Â   åˆ é™¤
 Â  Â  Â  Â   &lt;/el-button&gt;
 Â  Â  Â   &lt;/template&gt;
 Â  Â   &lt;/el-table-column&gt;
 Â   &lt;/el-table&gt;
â€‹
 Â   &lt;!-- åˆ†é¡µå·¥å…·æ¡ --&gt;
 Â   &lt;el-pagination :total=&quot;total&quot; v-model:currentPage=&quot;queryParams.currentPage&quot; v-model:page-size=&quot;queryParams.pageSize&quot;
 Â  Â   :page-sizes=&quot;[1, 3, 5, 10]&quot; layout=&quot;total, sizes, prev, pager, next, jumper&quot; @size-change=&quot;handleSizeChange&quot;
 Â  Â   @current-change=&quot;handleCurrentChange&quot; style=&quot;margin-top: 20px;&quot; /&gt;
â€‹
 Â   &lt;!-- è¡¨å•å¼¹çª— --&gt;
 Â   &lt;el-dialog :title=&quot;dialog.title&quot; v-model=&quot;dialog.visible&quot; width=&quot;500px&quot; destroy-on-close&gt;
 Â  Â   &lt;el-form ref=&quot;dataFormRef&quot; :model=&quot;formData&quot; :rules=&quot;rules&quot; label-width=&quot;100px&quot;&gt;
 Â  Â  Â   &lt;el-form-item label=&quot;è§’è‰²åç§°&quot; prop=&quot;role_name&quot;&gt;
 Â  Â  Â  Â   &lt;el-input v-model=&quot;formData.role_name&quot; placeholder=&quot;è¯·è¾“å…¥è§’è‰²åç§°&quot; /&gt;
 Â  Â  Â   &lt;/el-form-item&gt;
â€‹
 Â  Â  Â   &lt;el-form-item label=&quot;è§’è‰²æè¿°&quot; prop=&quot;remark&quot;&gt;
 Â  Â  Â  Â   &lt;el-input v-model=&quot;formData.remark&quot; placeholder=&quot;è¯·è¾“å…¥è§’è‰²æè¿°&quot; /&gt;
 Â  Â  Â   &lt;/el-form-item&gt;
â€‹
 Â  Â  Â   &lt;el-form-item label=&quot;çŠ¶æ€&quot;&gt;
 Â  Â  Â  Â   &lt;el-radio-group v-model=&quot;formData.status&quot;&gt;
 Â  Â  Â  Â  Â   &lt;el-radio :label=&quot;1&quot;&gt;æ­£å¸¸&lt;/el-radio&gt;
 Â  Â  Â  Â  Â   &lt;el-radio :label=&quot;0&quot;&gt;åœç”¨&lt;/el-radio&gt;
 Â  Â  Â  Â   &lt;/el-radio-group&gt;
 Â  Â  Â   &lt;/el-form-item&gt;
 Â  Â   &lt;/el-form&gt;
 Â  Â   &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;
 Â  Â  Â   &lt;el-button type=&quot;primary&quot; @click=&quot;submitFormData&quot;&gt;ç¡® å®š&lt;/el-button&gt;
 Â  Â  Â   &lt;el-button @click=&quot;cancel&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;
 Â  Â   &lt;/div&gt;
 Â   &lt;/el-dialog&gt;
â€‹
 Â   &lt;!--åˆ†é…èµ„æºå¼¹çª—--&gt;
 Â   &lt;el-dialog :title=&quot;'ã€' + checkedRole.role_name + 'ã€‘èµ„æºåˆ†é…'&quot; v-model=&quot;resourceDialogVisible&quot; width=&quot;800px&quot;&gt;
 Â  Â   &lt;el-scrollbar max-height=&quot;600px&quot; v-loading=&quot;loading&quot;&gt;
 Â  Â  Â   &lt;el-tree ref=&quot;resourceRef&quot; node-key=&quot;value&quot; show-checkbox :data=&quot;resourceOptions&quot; :default-expand-all=&quot;true&quot;
 Â  Â  Â  Â   @check-change=&quot;handleResourceCheckChange&quot;&gt;
 Â  Â  Â  Â   &lt;template #default=&quot;{ data }&quot;&gt;
 Â  Â  Â  Â  Â   &lt;span&gt;{{ data.label }}&lt;/span&gt;
â€‹
 Â  Â  Â  Â  Â   &lt;div v-if=&quot;data.perms&quot; class=&quot;resource-tree-node&quot;&gt;
 Â  Â  Â  Â  Â  Â   &lt;el-divider direction=&quot;vertical&quot; /&gt;
 Â  Â  Â  Â  Â  Â   &lt;div class=&quot;node-content&quot;&gt;
 Â  Â  Â  Â  Â  Â  Â   &lt;el-checkbox v-for=&quot;perm in data.perms&quot; :key=&quot;perm.value&quot; :label=&quot;perm.value&quot; border size=&quot;small&quot;
 Â  Â  Â  Â  Â  Â  Â  Â   v-model=&quot;btnPerms[perm.value]&quot;&gt;{{ perm.label }}&lt;/el-checkbox&gt;
 Â  Â  Â  Â  Â  Â   &lt;/div&gt;
 Â  Â  Â  Â  Â   &lt;/div&gt;
 Â  Â  Â  Â   &lt;/template&gt;
 Â  Â  Â   &lt;/el-tree&gt;
 Â  Â   &lt;/el-scrollbar&gt;
â€‹
 Â  Â   &lt;template #footer&gt;
 Â  Â  Â   &lt;div class=&quot;dialog-footer&quot;&gt;
 Â  Â  Â  Â   &lt;el-button type=&quot;primary&quot; @click=&quot;handleRoleResourceSubmit&quot;&gt;ç¡® å®š&lt;/el-button&gt;
 Â  Â  Â  Â   &lt;el-button @click=&quot;cancelResourceAssign&quot;&gt;å– æ¶ˆ&lt;/el-button&gt;
 Â  Â  Â   &lt;/div&gt;
 Â  Â   &lt;/template&gt;
 Â   &lt;/el-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;
â€‹
&lt;script lang=&quot;ts&quot;&gt;
export default {
  name: 'role'
};
&lt;/script&gt;
â€‹
&lt;script setup lang=&quot;ts&quot;&gt;
import { nextTick, onMounted, reactive, ref, toRefs } from 'vue';
import {
  listRolePages,
  updateRole,
  getRoleFormDetail,
  addRole,
  deleteRoles,
  getRoleResources,
  updateRoleResource
} from '@/utils/api/user/role';
import { listMenuOptions } from '@/utils/api/user/menu';
â€‹
import { ElForm, ElMessage, ElMessageBox, ElTree } from 'element-plus';
import { Search, CirclePlus, Refresh, Remove } from '@element-plus/icons-vue';
â€‹
â€‹
const queryFormRef = ref(ElForm);
const dataFormRef = ref(ElForm);
const resourceRef = ref(ElTree);
â€‹
const state = reactive({
  loading: true,
  // é€‰ä¸­IDæ•°ç»„
  ids: [],
  // éå•ä¸ªç¦ç”¨
  single: true,
  // éå¤šä¸ªç¦ç”¨
  multiple: true,
  queryParams: {
 Â   currentPage: 1,
 Â   pageSize: 10,
 Â   role_name: undefined
  } as RoleQueryParam,
  roleList: [] as RoleItem[],
  total: 0,
  dialog: {
 Â   title: '',
 Â   visible: false
  },
  formData: {
 Â   role_name: '',
 Â   remark: '',
 Â   status: 1
  } as RoleFormData,
  rules: {
 Â   role_name: [{ required: true, message: 'è¯·è¾“å…¥è§’è‰²åç§°', trigger: 'blur' }],
 Â   remark: [{ required: true, message: 'è¯·è¾“å…¥è§’è‰²æè¿°', trigger: 'blur' }]
  },
  resourceDialogVisible: false,
  resourceOptions: [] as Resource[],
  btnPerms: {} as any,
  // å‹¾é€‰çš„èœå•ID
  checkedMenuIds: new Set([]),
  allPermIds: [] as string[],
  // é€‰ä¸­çš„è§’è‰²
  checkedRole: {
 Â   role_id: 0,
 Â   role_name: ''
  }
});
â€‹
const {
  loading,
  multiple,
  queryParams,
  roleList,
  total,
  dialog,
  formData,
  rules,
  resourceDialogVisible,
  checkedRole,
  resourceOptions,
  btnPerms
} = toRefs(state);
â€‹
function handleQuery() {
  state.loading = true;
  listRolePages(state.queryParams).then(({ data }) =&gt; {
 Â   state.roleList = data.rows;
 Â   state.total = data.count;
 Â   state.loading = false;
  });
}
// æ¯é¡µæ˜¾ç¤ºæ¡æ•°æ”¹å˜ å°±ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°
const handleSizeChange = (val: number) =&gt; {
  // ä¿å­˜æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°
  queryParams.value.pageSize = val;
  queryParams.value.currentPage = 1;
  // è°ƒç”¨åˆ†é¡µå‡½æ•°
  handleQuery();
}
// å½“å‰é¡µç æ”¹å˜ å°±ä¼šè§¦å‘è¿™ä¸ªå‡½æ•°
const handleCurrentChange = (val: number) =&gt; {
  // ä¿å­˜å½“å‰é¡µç 
  queryParams.value.currentPage = val;
  // è°ƒç”¨åˆ†é¡µå‡½æ•°
  handleQuery();
}
/**
 * æŸ¥è¯¢é‡ç½®
 */
function resetQuery() {
  queryFormRef.value.resetFields();
  handleQuery();
}
â€‹
function handleSelectionChange(selection: any) {
  state.ids = selection.map((item: any) =&gt; item.role_id);
  state.single = selection.length !== 1;
  state.multiple = !selection.length;
}
â€‹
function handleAdd() {
  state.dialog = {
 Â   title: 'æ·»åŠ è§’è‰²',
 Â   visible: true
  };
}
â€‹
function handleUpdate(row: any) {
  state.dialog = {
 Â   title: 'ä¿®æ”¹è§’è‰²',
 Â   visible: true
  };
  const roleId = row.role_id || state.ids;
  getRoleFormDetail(roleId).then(({ data }) =&gt; {
 Â   state.formData = data;
  });
}
â€‹
function submitFormData() {
  loading.value = true;
  dataFormRef.value.validate((valid: any) =&gt; {
 Â   if (valid) {
 Â  Â   if (state.formData.role_id) {
 Â  Â  Â   updateRole(state.formData.role_id as any, state.formData).then(() =&gt; {
 Â  Â  Â  Â   ElMessage.success('ä¿®æ”¹è§’è‰²æˆåŠŸ');
 Â  Â  Â  Â   cancel();
 Â  Â  Â  Â   handleQuery();
 Â  Â  Â  Â   loading.value = false;
 Â  Â  Â   });
 Â  Â   } else {
 Â  Â  Â   addRole(state.formData).then(() =&gt; {
 Â  Â  Â  Â   cancel();
 Â  Â  Â  Â   ElMessage.success('æ–°å¢è§’è‰²æˆåŠŸ');
 Â  Â  Â  Â   handleQuery();
 Â  Â  Â  Â   loading.value = false;
 Â  Â  Â   });
 Â  Â   }
 Â   }
  });
}
â€‹
/**
 * å–æ¶ˆ
 */
function cancel() {
  dialog.value.visible = false;
  formData.value.role_id = undefined;
  dataFormRef.value.resetFields();
  dataFormRef.value.clearValidate();
}
â€‹
/**
 *  åˆ é™¤
 */
function handleDelete(row: any) {
  const ids = row.role_id || state.ids;
  ElMessageBox.confirm('ç¡®è®¤åˆ é™¤å·²é€‰ä¸­çš„æ•°æ®é¡¹?', 'è­¦å‘Š', {
 Â   confirmButtonText: 'ç¡®å®š',
 Â   cancelButtonText: 'å–æ¶ˆ',
 Â   type: 'warning'
  })
 Â   .then(() =&gt; {
 Â  Â   deleteRoles({ role_ids: ids }).then(() =&gt; {
 Â  Â  Â   ElMessage.success('åˆ é™¤æˆåŠŸ');
 Â  Â  Â   handleQuery();
 Â  Â   });
 Â   })
 Â   .catch(() =&gt; ElMessage.info('å·²å–æ¶ˆåˆ é™¤'));
}
// æ ‘å½¢æ§ä»¶èœå•å‹¾/åé€‰æ–¹æ³•
const handleResourceCheckChange = (
  data: Resource,
  isCheck: boolean,
  sonHasCheck: boolean
) =&gt; {
  console.log('data', data);
  console.log('isCheck', isCheck);
  // å½“å‹¾/åé€‰çš„èœå•å­˜åœ¨æŒ‰é’®æ—¶ï¼ŒæŒ‰é’®çš„çŠ¶æ€æ”¹æˆå¯¹åº”èœå•çŠ¶æ€
  if (data.perms) {
 Â   data.perms.forEach(item =&gt; {
 Â  Â   btnPerms.value[item.value] = isCheck;
 Â   });
  }
};
â€‹
/**
 * èµ„æºåˆ†é…
 */
function openRoleResourceDialog(row: RoleItem) {
  resourceDialogVisible.value = true;
  loading.value = true;
â€‹
  const roleId: number = row.role_id;
  checkedRole.value = {
 Â   role_id: roleId,
 Â   role_name: row.role_name
  };
â€‹
  // è·å–æ‰€æœ‰çš„èµ„æº
  listMenuOptions().then(response =&gt; {
 Â   resourceOptions.value = response.data;
â€‹
 Â   // è·å–è§’è‰²æ‹¥æœ‰çš„èµ„æº
 Â   getRoleResources(roleId).then(({ data }) =&gt; {
 Â  Â   // å‹¾é€‰çš„èœå•å›æ˜¾
 Â  Â   const checkedMenuIds = data.menu_ids;
 Â  Â   resourceRef.value.setCheckedKeys(checkedMenuIds);
â€‹
 Â  Â   nextTick(() =&gt; {
 Â  Â  Â   // å‹¾é€‰çš„æƒé™å›æ˜¾
 Â  Â  Â   const rolePermIds = data.permIds;
â€‹
 Â  Â  Â   state.allPermIds = filterResourcePermIds(response.data, []);
 Â  Â  Â   if (state.allPermIds) {
 Â  Â  Â  Â   state.allPermIds.forEach(permId =&gt; {
 Â  Â  Â  Â  Â   if (rolePermIds.indexOf(permId) &gt; -1) {
 Â  Â  Â  Â  Â  Â   btnPerms.value[permId] = true;
 Â  Â  Â  Â  Â   } else {
 Â  Â  Â  Â  Â  Â   btnPerms.value[permId] = false;
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â   });
 Â  Â  Â   }
 Â  Â  Â   loading.value = false;
 Â  Â   });
 Â   });
  });
}
â€‹
const filterResourcePermIds = (resources: Resource[], permIds: string[]) =&gt; {
  resources.forEach(resource =&gt; {
 Â   if (resource.perms) {
 Â  Â   resource.perms.forEach(perm =&gt; {
 Â  Â  Â   permIds.push(perm.value);
 Â  Â   });
 Â   }
 Â   if (resource.children) {
 Â  Â   filterResourcePermIds(resource.children, permIds);
 Â   }
  });
  return permIds;
};
/**
 * åˆ†é…èµ„æºæäº¤
 */
function handleRoleResourceSubmit() {
  const checkedMenuIds: any[] = resourceRef.value
 Â   .getCheckedNodes(false, true)
 Â   .map((node: any) =&gt; node.value);
â€‹
  const checkedPermIds = [] as string[];
  if (state.allPermIds) {
 Â   state.allPermIds.forEach(permId =&gt; {
 Â  Â   if (btnPerms.value[permId]) {
 Â  Â  Â   checkedPermIds.push(permId);
 Â  Â   }
 Â   });
  }
â€‹
  const RoleResource = {
 Â   menu_ids: checkedMenuIds,
 Â   permIds: checkedPermIds
  };
â€‹
  updateRoleResource(checkedRole.value.role_id, RoleResource).then(res =&gt; {
 Â   ElMessage.success('åˆ†é…æƒé™æˆåŠŸ');
 Â   state.resourceDialogVisible = false;
 Â   handleQuery();
  });
}
â€‹
/**
 * å–æ¶ˆèµ„æºåˆ†é…
 */
function cancelResourceAssign() {
  state.resourceDialogVisible = false;
}
â€‹
onMounted(() =&gt; {
  handleQuery();
});
&lt;/script&gt;
â€‹
&lt;style lang=&quot;scss&quot;&gt;
.resource-tree-node {
  flex-wrap: wrap;
  display: inline-flex;
  font-size: 14px;
  justify-content: flex-end;
â€‹
  .node-content {
 Â   width: 600px;
 Â   display: flex;
 Â   flex-wrap: wrap;
  }
â€‹
  .el-divider--vertical {
 Â   height: 1.5em !important;
  }
}
â€‹
â€‹
.el-tree-node__content {
  height: auto !important;
}
â€‹
.el-checkbox-group {
  display: flex;
  flex-wrap: wrap;
â€‹
  &amp;:hover {
 Â   background-color: var(--el-tree-node-hover-bg-color);
  }
â€‹
  &amp;:active {
 Â   background-color: var(--el-tree-node-hover-bg-color);
  }
}
â€‹
.el-checkbox.el-checkbox--small {
  margin: 5px;
  z-index: 999;
  background: #fff;
}
&lt;/style&gt;
</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/vuepress-blog/blogs/vue3åå°ç®¡ç†ç³»ç»Ÿ-ç”¨æˆ·ç®¡ç†é¡µé¢.html" class="prev">
          vue3åå°ç®¡ç†ç³»ç»Ÿ-ç”¨æˆ·ç®¡ç†é¡µé¢ğŸ”¥
        </a></span> <span class="next"><a href="/vuepress-blog/blogs/vue3åå°ç®¡ç†ç³»ç»Ÿ-èœå•ç®¡ç†é¡µé¢.html">
          vue3åå°ç®¡ç†ç³»ç»Ÿ-èœå•ç®¡ç†é¡µé¢ğŸ”¥
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/vue3%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2.html#å‰è¨€" class="sidebar-link reco-side-å‰è¨€" data-v-b57cc07c>å‰è¨€</a></li><li class="level-2" data-v-b57cc07c><a href="/vuepress-blog/blogs/vue3%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2.html#è§’è‰²ç®¡ç†åˆ†é…èµ„æºçš„å®ç°" class="sidebar-link reco-side-è§’è‰²ç®¡ç†åˆ†é…èµ„æºçš„å®ç°" data-v-b57cc07c>è§’è‰²ç®¡ç†åˆ†é…èµ„æºçš„å®ç°</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/vue3%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2.html#æ¥å£æ•°æ®æ¥å£" class="sidebar-link reco-side-æ¥å£æ•°æ®æ¥å£" data-v-b57cc07c>æ¥å£æ•°æ®æ¥å£</a></li><li class="level-3" data-v-b57cc07c><a href="/vuepress-blog/blogs/vue3%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-%E8%A7%92%E8%89%B2%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2.html#html-ç»“æ„" class="sidebar-link reco-side-html-ç»“æ„" data-v-b57cc07c>html ç»“æ„</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/vuepress-blog/assets/js/app.4d1def3f.js" defer></script><script src="/vuepress-blog/assets/js/3.7d50d3e1.js" defer></script><script src="/vuepress-blog/assets/js/1.6ae6daff.js" defer></script><script src="/vuepress-blog/assets/js/73.4514ed93.js" defer></script>
  </body>
</html>
